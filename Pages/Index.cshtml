@page
@model BookwormsOnline.Pages.IndexModel
@{
    ViewData["Title"] = "Home";
}

<div class="row g-4">
    <div class="col-12 col-lg-4">
        <div class="card bw-card shadow-lg">
            <div class="card-body p-4 text-center">
                @if (Model.CurrentUser?.PhotoFileName is { Length: > 0 })
                {
                    <img class="rounded-circle border border-light-subtle"
                         src="~/uploads/@Model.CurrentUser.PhotoFileName"
                         alt="Profile photo"
                         style="width: 120px; height: 120px; object-fit: cover;" />
                }
                else
                {
                    <div class="rounded-circle mx-auto d-flex align-items-center justify-content-center"
                         style="width:120px;height:120px;background:rgba(255,255,255,.08);">
                        <span class="fs-2">👤</span>
                    </div>
                }

                <h4 class="mt-3 mb-1">@Model.CurrentUser?.FirstName @Model.CurrentUser?.LastName</h4>
                <div class="text-muted">@Model.CurrentUser?.Email</div>

                <div class="d-grid mt-3">
                    <a class="btn btn-outline-light" href="/Logout">Logout</a>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 col-lg-8">
        <div class="card bw-card shadow-lg">
            <div class="card-header p-4">
                <h4 class="mb-0">Account Details</h4>
            </div>

            <div class="card-body p-4">
                @if (Model.CurrentUser == null)
                {
                    <div class="text-muted">Loading…</div>
                }
                else
                {
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="text-muted small">Mobile</div>
                            <div class="fw-semibold">@Model.CurrentUser.MobileNo</div>
                        </div>

                        <div class="col-md-6">
                            <div class="text-muted small">Credit Card</div>
                            <div class="fw-semibold">@Model.MaskedCreditCard</div>
                            <div class="form-text">Displayed masked for safety; decrypted server-side.</div>
                        </div>

                        <div class="col-12">
                            <div class="text-muted small">Billing Address</div>
                            <div class="fw-semibold">@Model.CurrentUser.BillingAddress</div>
                        </div>

                        <div class="col-12">
                            <div class="text-muted small">Shipping Address</div>
                            <div class="fw-semibold">@Model.CurrentUser.ShippingAddress</div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
